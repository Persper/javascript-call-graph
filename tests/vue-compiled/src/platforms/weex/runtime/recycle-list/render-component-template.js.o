'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isRecyclableComponent = isRecyclableComponent;
exports.renderRecyclableComponentTemplate = renderRecyclableComponentTemplate;

var _debug = require('core/util/debug');

var _error = require('core/util/error');

var _index = require('weex/util/index');

var _createComponent = require('core/vdom/create-component');

var _virtualComponent = require('./virtual-component');

function isRecyclableComponent(vnode) {
  return vnode.data.attrs ? _index.RECYCLE_LIST_MARKER in vnode.data.attrs : false;
}

function renderRecyclableComponentTemplate(vnode) {
  // $flow-disable-line
  delete vnode.data.attrs[_index.RECYCLE_LIST_MARKER];
  (0, _virtualComponent.resolveVirtualComponent)(vnode);
  var vm = (0, _createComponent.createComponentInstanceForVnode)(vnode);
  var render = vm.$options['@render'];
  if (render) {
    try {
      return render.call(vm);
    } catch (err) {
      (0, _error.handleError)(err, vm, '@render');
    }
  } else {
    (0, _debug.warn)('@render function not defined on component used in <recycle-list>. ' + 'Make sure to declare `recyclable="true"` on the component\'s template.', vm);
  }
}

