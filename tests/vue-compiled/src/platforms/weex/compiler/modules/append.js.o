'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _util = require('shared/util');

// The "unitary tag" means that the tag node and its children
// must be sent to the native together.
var isUnitaryTag = (0, _util.makeMap)('cell,header,cell-slot,recycle-list', true);

function preTransformNode(el, options) {
  if (isUnitaryTag(el.tag) && !el.attrsList.some(function (item) {
    return item.name === 'append';
  })) {
    el.attrsMap.append = 'tree';
    el.attrsList.push({ name: 'append', value: 'tree' });
  }
  if (el.attrsMap.append === 'tree') {
    el.appendAsTree = true;
  }
}

function genData(el) {
  return el.appendAsTree ? 'appendAsTree:true,' : '';
}

exports.default = {
  staticKeys: ['appendAsTree'],
  preTransformNode: preTransformNode,
  genData: genData
};

