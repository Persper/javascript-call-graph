/* eslint-disable no-unused-vars */

'use strict';

process.env.NODE_ENV = 'production';

var Vue = require('../../dist/vue.runtime.common.js');
var createRenderer = require('../../packages/vue-server-renderer').createRenderer;
var renderToStream = createRenderer().renderToStream;
var gridComponent = require('./common.js');

console.log('--- renderToStream --- ');
var self = global || root;
var s = self.performance.now();

var stream = renderToStream(new Vue(gridComponent));
var str = '';
var first = void 0;
var complete = void 0;
stream.once('data', function () {
  first = self.performance.now() - s;
});
stream.on('data', function (chunk) {
  str += chunk;
});
stream.on('end', function () {
  complete = self.performance.now() - s;
  console.log('first chunk: ' + first.toFixed(2) + 'ms');
  console.log('complete: ' + complete.toFixed(2) + 'ms');
  console.log();
});

